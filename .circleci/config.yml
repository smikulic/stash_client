version: 2
jobs:
  build:
    working_directory: ~/stash_client
    docker:
      - image: circleci/node:8.1.4
    steps:
      - checkout
      - run:
          name: Step - Build
          command: |
            yarn install
            yarn build:production
  test:
    working_directory: ~/stash_client
    docker:
      - image: circleci/node:8.1.4
    steps:
      - checkout
      - run:
          name: Step - Lint
          command: yarn lint
      - run:
          name: Step - Test
          command: yarn test

workflows:
  version: 2
  build-and-test:
    jobs:
      - build
      - test:
          requires:
            - build
      # - deploy:
      #     requires:
      #       - test1
        
  # deployment:
  #   release:
  #     tag: /release-.*/
  #     steps:
  #       - run:
  #           name: Step - Build Production
  #           command: yarn build:production
  #       - run:
  #           name: Step - Copy Production Build To Server
  #           command: scp -r dist/* $DO_USER@$DO_IP:/var/www/scroogevault.co/dist/
